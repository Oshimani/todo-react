(window["webpackJsonptodo-react"]=window["webpackJsonptodo-react"]||[]).push([[0],{64:function(e,t,n){e.exports=n(87)},87:function(e,t,n){"use strict";n.r(t);var o,a=n(0),r=n.n(a),i=n(28),c=n.n(i),l=n(16),s=n(119),u=n(2),d=n(113),m=n(40),f=n(112),g=n(29),p=n(109),h=n(115),b=n(118),y=n(117),v=n(5),w=n(108);!function(e){e[e.initial=0]="initial",e[e.pending=1]="pending",e[e.success=2]="success",e[e.error=3]="error"}(o||(o={}));var E=n(20),O=function e(){Object(E.a)(this,e)};O.localAPI="local-api",O.localStorage="local-storage";var k=n(30),S=n(21),j=n.n(S),P="https://localhost:5001/",I=function(){function e(){Object(E.a)(this,e)}return Object(k.a)(e,[{key:"getAll",value:function(){return new Promise((function(e,t){j.a.get("/api/todoitems",{baseURL:P}).then((function(n){200===n.status?e(n.data):(console.error("Status does not indicate success! -> ".concat(n.status)),t(n))})).catch((function(e){t(e)}))}))}},{key:"getById",value:function(e){return new Promise((function(t,n){j.a.get("/api/todoitems/".concat(e),{baseURL:P}).then((function(e){e.status%200<100?t(e.data):(console.error("Status does not indicate success! -> ".concat(e.status)),n(e))})).catch((function(e){n(e)}))}))}},{key:"update",value:function(e,t){return new Promise((function(n,o){j.a.put("/api/todoItems/".concat(e),t,{baseURL:P}).then((function(e){e.status%200<100?n(e.data):(console.error("Status does not indicate success! -> ".concat(e.status)),o(e))})).catch((function(e){o(e)}))}))}},{key:"create",value:function(e){return new Promise((function(t,n){j.a.post("/api/todoItems/",e,{baseURL:P}).then((function(e){e.status%200<100?t(e.data):(console.error("Status does not indicate success! -> ".concat(e.status)),n(e))})).catch((function(e){n(e)}))}))}},{key:"deleteById",value:function(e){return new Promise((function(t,n){j.a.delete("/api/todoitems/".concat(e),{baseURL:P}).then((function(e){e.status%200<100?t(e.data):(console.error("Status does not indicate success! -> ".concat(e.status)),n(e))})).catch((function(e){n(e)}))}))}}]),e}();function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var C="todo-Database",A=function(){function e(){Object(E.a)(this,e),localStorage.getItem(C)||localStorage.setItem(C,JSON.stringify(new Array))}return Object(k.a)(e,[{key:"_getDelay",value:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}},{key:"_getItems",value:function(){return JSON.parse(String(localStorage.getItem(C)))}},{key:"_setItems",value:function(e){localStorage.setItem(C,JSON.stringify(e))}},{key:"getAll",value:function(){var e=this;return new Promise((function(t){setTimeout((function(){t(e._getItems())}),e._getDelay(100,1e3))}))}},{key:"getById",value:function(e){var t=this;return new Promise((function(n,o){setTimeout((function(){var a=t._getItems().find((function(t){return t.id===e}));a&&n(a),o(new Error("Item does not exist!"))}),t._getDelay(100,1e3))}))}},{key:"update",value:function(e,t){var n=this;return new Promise((function(o,a){setTimeout((function(){var r=n._getItems();r.forEach((function(a){a.id===e&&(Object.assign(a,t),n._setItems(r),o(t))})),a(new Error("Item does not exist!"))}),n._getDelay(100,1e3))}))}},{key:"create",value:function(e){var t=this;return new Promise((function(n){setTimeout((function(){var o=t._getItems(),a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{id:o.length+1});o.push(a),t._setItems(o),n(a)}),t._getDelay(100,1e3))}))}},{key:"deleteById",value:function(e){var t=this;return new Promise((function(n){setTimeout((function(){var o=t._getItems(),a=o.findIndex((function(t){return t.id===e}));a&&o.splice(a,1),t._setItems(o),n()}),t._getDelay(100,1e3))}))}}]),e}(),D=function(e){switch(e){case O.localAPI:return new I;default:return new A}},B=r.a.createContext(""),L=B.Provider,T=B;function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var z=function(e){var t=D(Object(a.useContext)(T)),n=Object(a.useState)(o.initial),i=Object(l.a)(n,2),c=i[0],f=i[1],E=function(){f(o.pending),t.update(e.item.id,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.item,{isComplete:!0})).then((function(t){f(o.initial),e.onUpdate(e.item.id)})).catch((function(e){console.error("Failed to update!"),f(o.error),setTimeout((function(){f(o.initial)}),3e3)}))};return r.a.createElement("div",null,r.a.createElement(p.a,{styles:{root:{textAlign:"initial"}},tokens:{padding:5,childrenGap:5,width:"100%",maxWidth:"-webkit-fill-available"}},r.a.createElement(p.a.Section,{tokens:{padding:4}},r.a.createElement(d.a,{horizontal:!0,tokens:{childrenGap:12}},r.a.createElement(m.a,null,e.item.isImportant&&r.a.createElement(h.a,{styles:{root:{fontSize:u.c.xxLarge}},iconName:"LightningBolt"}),!e.item.isImportant&&r.a.createElement(h.a,{styles:{root:{fontSize:u.c.xxLarge}},iconName:"DietPlanNotebook"})),r.a.createElement(m.a,{grow:!0},r.a.createElement(s.a,{styles:{root:{fontSize:u.c.xLarge}}},e.item.name)))),e.item.description&&r.a.createElement(p.a.Section,{tokens:{padding:4},styles:{root:{borderTop:"solid 1px ".concat(u.b.neutralQuaternary)}}},r.a.createElement(s.a,null,e.item.description)),r.a.createElement(p.a.Section,{tokens:{padding:4},horizontalAlign:"end",horizontal:!0,styles:{root:{borderTop:"solid 1px ".concat(u.b.neutralQuaternary)}}},c===o.pending&&r.a.createElement(m.a,{grow:!0},r.a.createElement(b.a,null)),c===o.error&&r.a.createElement(m.a,{grow:!0},r.a.createElement(y.a,{messageBarType:v.a.error},"Operation failed!")),e.item.isComplete&&c===o.initial&&r.a.createElement(m.a,{grow:!0},r.a.createElement(y.a,{messageBarType:v.a.success},"Completed!")),r.a.createElement(w.a,{onClick:function(){return E()},disabled:e.item.isComplete,iconProps:{iconName:"Completed"}}),r.a.createElement(w.a,{onClick:function(){return f(o.pending),void t.deleteById(e.item.id).then((function(){e.onDelete(e.item.id)})).catch((function(e){console.error("Failed to delete!"),f(o.error),setTimeout((function(){f(o.initial)}),3e3)}))},iconProps:{iconName:"RecycleBin"}}))))},N=n(110),W=function(e){var t=D(Object(a.useContext)(T)),n=Object(a.useState)(String()),i=Object(l.a)(n,2),c=i[0],s=i[1],f=Object(a.useState)(String()),g=Object(l.a)(f,2),h=g[0],E=g[1],O=Object(a.useState)(void 0),k=Object(l.a)(O,2),S=k[0],j=k[1],P=Object(a.useState)(o.initial),I=Object(l.a)(P,2),x=I[0],C=I[1];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(p.a,{styles:{root:{textAlign:"initial"}},tokens:{padding:5,childrenGap:5,width:"100%",maxWidth:"-webkit-fill-available"}},r.a.createElement(p.a.Section,{tokens:{padding:4}},r.a.createElement(d.a,{horizontal:!0,tokens:{childrenGap:12}},r.a.createElement(m.a,null,r.a.createElement(w.a,{styles:{icon:{fontSize:u.c.xxLarge}},iconProps:{iconName:function(){switch(S){case!1:return"DietPlanNotebook";case!0:return"LightningBolt";default:return"CircleAddition"}}()},menuProps:{calloutProps:{styles:{calloutMain:{selectors:{div:{minWidth:"unset"},i:{fontSize:u.c.xLarge}}}}},isBeakVisible:!0,items:[{key:"nonImportant",name:"Common",title:"not important",onClick:function(){return j(!1)},iconProps:{iconName:"DietPlanNotebook"}},{key:"Important",name:"Important",title:"important",onClick:function(){return j(!0)},iconProps:{iconName:"LightningBolt"}}],directionalHintFixed:!0}})),r.a.createElement(m.a,{grow:!0},r.a.createElement(N.a,{styles:{root:{},field:{fontSize:u.c.xLarge},fieldGroup:{background:"none",selectors:{"&:hover":{background:u.b.white}}}},placeholder:"Add your title here",value:c,borderless:!0,onChange:function(e,t){return s(String(t))}})))),r.a.createElement(p.a.Section,{tokens:{padding:4},styles:{root:{borderTop:"solid 1px ".concat(u.b.neutralQuaternary)}}},r.a.createElement(N.a,{styles:{root:{},fieldGroup:{background:"none",selectors:{"&:hover":{background:u.b.white}}}},placeholder:"Add your description here",value:h,resizable:!1,autoAdjustHeight:!0,multiline:!0,borderless:!0,onChange:function(e,t){return E(String(t))}})),r.a.createElement(p.a.Section,{tokens:{padding:4},horizontalAlign:"end",horizontal:!0,styles:{root:{borderTop:"solid 1px ".concat(u.b.neutralQuaternary)}}},x===o.pending&&r.a.createElement(m.a,{grow:!0},r.a.createElement(b.a,null)),x===o.success&&r.a.createElement(m.a,{grow:!0},r.a.createElement(y.a,{messageBarType:v.a.success},"Added your todo!")),x===o.error&&r.a.createElement(m.a,{grow:!0},r.a.createElement(y.a,{messageBarType:v.a.error},"Could not add your todo!")),r.a.createElement(w.a,{onClick:function(){return C(o.pending),void 0===S&&j(!1),void t.create({name:c,description:h,isComplete:!1,isImportant:S}).then((function(t){C(o.success),e.onCreate(t),s(String()),E(String()),j(void 0)})).catch((function(e){console.error("Failed to create"),C(o.error)})).finally((function(){setTimeout((function(){C(o.initial)}),3e3)}))},disabled:!c||x===o.pending,iconProps:{iconName:"Add"}})))))},R=function(){var e=Object(a.useState)(new Array),t=Object(l.a)(e,2),n=t[0],o=t[1],i=D(Object(a.useContext)(T));return Object(a.useEffect)((function(){i.getAll().then((function(e){return o(e)})).catch((function(e){return console.error(e)}))}),[]),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(s.a,{styles:{root:{fontSize:u.c.large}}},"My todo app in react"),r.a.createElement("br",null),n&&r.a.createElement(s.a,{styles:{root:{fontSize:u.c.medium,fontWeight:u.d.semilight,selectors:{span:{fontWeight:u.d.semibold}}}}},"I found ",r.a.createElement("span",null,n.length)," todos for you."),r.a.createElement(d.a,{styles:{root:{margin:"auto",maxWidth:"60%",minWidth:350}},tokens:{childrenGap:12,padding:8}},r.a.createElement(m.a,{styles:{root:{backgroundColor:u.b.neutralLighterAlt}},grow:1},r.a.createElement(W,{onCreate:function(e){return function(e){console.log("Adding item: ".concat(e.id)),o(n.concat(e))}(e)}})),r.a.createElement(f.a,null),n.map((function(e){return r.a.createElement(m.a,{key:e.id,styles:{root:{backgroundColor:u.b.neutralLighterAlt}},grow:1},r.a.createElement(z,{item:e,onUpdate:function(e){return function(e){console.log("Reloading item: ".concat(e)),i.getById(e).then((function(e){o(n.map((function(t){return t.id===e.id?e:t})))}))}(e)},onDelete:function(e){return function(e){console.log("Removing item: ".concat(e)),o(n.filter((function(t){return t.id!==e})))}(e)}}))}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=n(60),U=n(114);Object(G.a)(),console.log(window.location.hostname);var J=O.localStorage;window.location.hostname.includes("github.io")&&(J=O.localStorage),c.a.render(r.a.createElement(L,{value:J},r.a.createElement(U.a,null,r.a.createElement(R,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[64,1,2]]]);
//# sourceMappingURL=main.d70c561b.chunk.js.map